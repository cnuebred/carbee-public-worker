class Tree{tree={};proxy={};refs={};imports={};forms={};pure={};params={};constructor(){}}const read_nest=(t,e)=>{var r=(e="string"==typeof e?e.split("."):e).shift();return r?read_nest(t[r],e):t},set_nest=(t,e,r)=>{var s=(e="string"==typeof e?e.split("."):e).shift();s&&(1<e.length?read_nest(t[s],e):t[s]=r)};class CoreWorker extends Tree{constructor(){super()}set_imports(){document.querySelectorAll("script[ref_href_lib]").forEach(t=>{this.imports[t.getAttribute("ref_href_lib")||""]=window[t.getAttribute("name_href_lib")||""]})}deep_proxy(s,o){return new Proxy(this.proxy,{get:(t,e,r)=>{t=Reflect.get(t,e,r);return"object"==typeof t&&null!==t?this.deep_proxy(t,o):t},set:(t,e,r)=>(set_nest(t,e,r),console.log(t,e,r),o(s,t,e,r),!0)})}proxy_callback=(t,e,r,s)=>{var o=document.querySelectorAll(`[proxy_data="${r}"]`);console.log(o,r),o.forEach(t=>{t.textContent=read_nest(this.proxy,t.getAttribute("proxy_data")||"")})};set_refs(){document.querySelectorAll("[ref]").forEach(t=>{this.refs[t.getAttribute("ref")||""]=t})}set_forms(){document.querySelectorAll("div[form]").forEach(t=>{const s=t.getAttribute("form")||"_";this.forms[s]={},t.querySelectorAll("input[data-input]").forEach(t=>{var e=t.getAttribute("name")||"_";const r=t.getAttribute("input-proxy");this.forms[s][e]=t,r&&(this.proxy[r]=t.value,t.addEventListener("input",()=>{r&&(this.proxy[r]=t.value)}))})})}set_table(){}set_params(){var t,e;for([t,e]of new URLSearchParams(window.location.search).entries())this.params[t.toString()]=e.toString()}init(){return this.set_params(),this.set_imports(),this.set_refs(),this.proxy=this.deep_proxy(this.proxy,this.proxy_callback),this.set_forms(),this}$on_event(t,e,r){const s=document.querySelector(t);this.tree[t]||(this.tree[t]={}),s?.addEventListener(e,()=>{r({self:s,item:this.tree[t],proxy:this.proxy,refs:this.refs,imports:this.imports,forms:this.forms,params:this.params})})}}